# é…ç½®æ–‡ä»¶è¯´æ˜Ž (Configuration Guide)

## ðŸ“ æ–‡ä»¶ç»“æž„

```
Inc/config.h     - é…ç½®å¤´æ–‡ä»¶ï¼ˆå®å®šä¹‰å’Œå¤–éƒ¨å˜é‡å£°æ˜Žï¼‰
Src/config.c     - é…ç½®å®žçŽ°æ–‡ä»¶ï¼ˆå˜é‡å®šä¹‰å’Œåˆå§‹åŒ–å‡½æ•°ï¼‰
```

## ðŸŽ¯ åŠŸèƒ½è¯´æ˜Ž

`config.h` å’Œ `config.c` æ–‡ä»¶é›†ä¸­ç®¡ç†äº†æ•´ä¸ªåŽ‹åŠ›ç›‘æµ‹ä»ªæµ‹è¯•å·¥è£…çš„å…¨å±€é…ç½®å‚æ•°ï¼ŒåŒ…æ‹¬ï¼š

### 1. è°ƒè¯•é…ç½®
- `Debug_Mode`: è°ƒè¯•æ¨¡å¼å¼€å…³ï¼ˆ1=å¼€å¯ï¼Œ0=å…³é—­ï¼‰
- `DEBUG_PRINT_TIME`: è°ƒè¯•æ‰“å°æ—¶é—´é—´éš”ï¼ˆmsï¼‰
- `debug_print_time`: è°ƒè¯•æ‰“å°è®¡æ•°å™¨

### 2. å·¥ä½œæ¨¡å¼é…ç½®
- `Passthrough_Mode`: é€ä¼ æ¨¡å¼å¼€å…³
  - `0` = æ­£å¸¸æµ‹è¯•æ¨¡å¼ï¼ˆå·¥è£…è‡ªåŠ¨æµ‹è¯•ï¼‰
  - `1` = é€ä¼ æ¨¡å¼ï¼ˆPC â†” åŽ‹åŠ›ç›‘æµ‹ä»ªä¸»æŽ§æ¿ç›´æŽ¥é€šä¿¡ï¼Œç”¨äºŽè°ƒè¯•ï¼‰

### 3. çœ‹é—¨ç‹—é…ç½®
- `WATCH_DOG_ENABLE`: çœ‹é—¨ç‹—ä½¿èƒ½ï¼ˆ1=å¯ç”¨ï¼Œ0=ç¦ç”¨ï¼‰
  - âš ï¸ ç”Ÿäº§çŽ¯å¢ƒå»ºè®®å¯ç”¨ï¼Œå¼€å‘è°ƒè¯•æ—¶å¯ä»¥ç¦ç”¨

### 4. æµ‹è¯•å‚æ•°é…ç½®
- `DEFAULT_STEP_TIMEOUT_MS`: é»˜è®¤å•æ­¥æµ‹è¯•è¶…æ—¶æ—¶é—´ï¼ˆ3000msï¼‰
- `DEFAULT_TOTAL_TIMEOUT_MS`: é»˜è®¤æ€»æµ‹è¯•è¶…æ—¶æ—¶é—´ï¼ˆ110000msï¼‰
- `PMTF_BOOT_DELAY_MS`: åŽ‹åŠ›ç›‘æµ‹ä»ªä¸»æŽ§æ¿å¯åŠ¨å»¶æ—¶ï¼ˆ1000msï¼‰
- `MAX_RETRY_COUNT`: æœ€å¤§é‡è¯•æ¬¡æ•°ï¼ˆ5æ¬¡ï¼‰

### 5. LEDé…ç½®
- `LED_BREATHING_TIME`: LEDå‘¼å¸ç¯é»˜è®¤æ—¶é—´é—´éš”ï¼ˆ500msï¼‰

### 6. ç”µåŽ‹é˜ˆå€¼é…ç½®ï¼ˆå•ä½ï¼šmVï¼‰
- `FIXTURE_3V6_VOLTAGE_MIN`: å·¥è£…24Vâ†’3.6V DC-DCè¾“å‡ºç”µåŽ‹ä¸‹é™ï¼ˆ3200mVï¼‰
- `FIXTURE_3V6_VOLTAGE_MAX`: å·¥è£…24Vâ†’3.6V DC-DCè¾“å‡ºç”µåŽ‹ä¸Šé™ï¼ˆ4000mVï¼‰
- `PMTF_LDO_3V3_VOLTAGE_MIN`: åŽ‹åŠ›ç›‘æµ‹ä»ªPCBA 3.3V LDOç”µåŽ‹ä¸‹é™ï¼ˆ3000mVï¼‰
- `PMTF_LDO_3V3_VOLTAGE_MAX`: åŽ‹åŠ›ç›‘æµ‹ä»ªPCBA 3.3V LDOç”µåŽ‹ä¸Šé™ï¼ˆ3400mVï¼‰

### 7. åŠŸè€—é˜ˆå€¼é…ç½®ï¼ˆå•ä½ï¼šÎ¼Aï¼‰
- `STATIC_POWER_CONSUMPTION_MIN`: é™æ€åŠŸè€—ä¸‹é™ï¼ˆ2Î¼Aï¼‰
- `STATIC_POWER_CONSUMPTION_MAX`: é™æ€åŠŸè€—ä¸Šé™ï¼ˆ30Î¼Aï¼‰

### 8. UARTé…ç½®
- `UART0_BAUDRATE`: UART0æ³¢ç‰¹çŽ‡ï¼ˆPCé€šä¿¡ï¼Œ9600ï¼‰
- `UART1_BAUDRATE`: UART1æ³¢ç‰¹çŽ‡ï¼ˆçº¢å¤–é€šä¿¡ï¼Œ2400ï¼‰
- `UART3_BAUDRATE`: UART3æ³¢ç‰¹çŽ‡ï¼ˆè°ƒè¯•ä¸²å£ï¼Œ115200ï¼‰
- `UART4_BAUDRATE`: UART4æ³¢ç‰¹çŽ‡ï¼ˆåŽ‹åŠ›ç›‘æµ‹ä»ªä¸»æŽ§æ¿é€šä¿¡ï¼Œ9600ï¼‰

### 9. åè®®é…ç½®
- `PROTOCOL_FRAME_HEADER`: åè®®å¸§å¤´ï¼ˆ0x68ï¼‰
- `PROTOCOL_FRAME_TAIL`: åè®®å¸§å°¾ï¼ˆ0x16ï¼‰
- `PROTOCOL_MAX_FRAME_LENGTH`: åè®®æœ€å¤§å¸§é•¿åº¦ï¼ˆ200å­—èŠ‚ï¼‰

## ðŸ”§ ä½¿ç”¨æ–¹æ³•

### åœ¨æ–°æ–‡ä»¶ä¸­ä½¿ç”¨é…ç½®

```c
#include "config.h"

void my_function(void) {
    // ä½¿ç”¨å…¨å±€å˜é‡
    if (Debug_Mode) {
        // è°ƒè¯•ä»£ç 
    }

    // ä½¿ç”¨å®å®šä¹‰
    uint32_t timeout = DEFAULT_STEP_TIMEOUT_MS;

    // ä½¿ç”¨é˜ˆå€¼
    if (voltage > PMTF_LDO_3V3_VOLTAGE_MIN &&
        voltage < PMTF_LDO_3V3_VOLTAGE_MAX) {
        // ç”µåŽ‹æ­£å¸¸
    }
}
```

### ä¿®æ”¹é…ç½®

#### æ–¹å¼1ï¼šä¿®æ”¹é»˜è®¤å€¼ï¼ˆæŽ¨èï¼‰
ç¼–è¾‘ `Src/config.c` æ–‡ä»¶ä¸­çš„å˜é‡åˆå§‹å€¼ï¼š

```c
uint8_t Debug_Mode = 0;        // å…³é—­è°ƒè¯•æ¨¡å¼
uint8_t Passthrough_Mode = 1;  // å¯ç”¨é€ä¼ æ¨¡å¼
```

#### æ–¹å¼2ï¼šè¿è¡Œæ—¶ä¿®æ”¹
åœ¨ä»£ç ä¸­ç›´æŽ¥ä¿®æ”¹å…¨å±€å˜é‡ï¼š

```c
#include "config.h"

void setup(void) {
    Debug_Mode = 0;           // å…³é—­è°ƒè¯•
    Passthrough_Mode = 1;     // åˆ‡æ¢åˆ°é€ä¼ æ¨¡å¼
}
```

#### æ–¹å¼3ï¼šä¿®æ”¹å®å®šä¹‰
ç¼–è¾‘ `Inc/config.h` æ–‡ä»¶ä¸­çš„å®å®šä¹‰ï¼š

```c
#define DEBUG_PRINT_TIME 500   // æ”¹ä¸º500ms
#define WATCH_DOG_ENABLE 1     // å¯ç”¨çœ‹é—¨ç‹—
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **çœ‹é—¨ç‹—é…ç½®**ï¼š
   - å¼€å‘è°ƒè¯•æ—¶å»ºè®®è®¾ç½® `WATCH_DOG_ENABLE = 0`
   - ç”Ÿäº§çŽ¯å¢ƒå¿…é¡»è®¾ç½® `WATCH_DOG_ENABLE = 1`

2. **é€ä¼ æ¨¡å¼**ï¼š
   - é€ä¼ æ¨¡å¼ç”¨äºŽç›´æŽ¥ä¸ŽåŽ‹åŠ›ç›‘æµ‹ä»ªä¸»æŽ§æ¿é€šä¿¡ï¼Œæ–¹ä¾¿è°ƒè¯•
   - æ­£å¸¸æµ‹è¯•æ—¶å¿…é¡»è®¾ç½® `Passthrough_Mode = 0`

3. **ç”µåŽ‹é˜ˆå€¼**ï¼š
   - æ ¹æ®å®žé™…ç¡¬ä»¶è°ƒæ•´é˜ˆå€¼èŒƒå›´
   - é˜ˆå€¼è¿‡å®½ä¼šé™ä½Žæµ‹è¯•å‡†ç¡®æ€§
   - é˜ˆå€¼è¿‡çª„å¯èƒ½å¯¼è‡´è¯¯åˆ¤

4. **åŠŸè€—é˜ˆå€¼**ï¼š
   - é™æ€åŠŸè€—é˜ˆå€¼æ ¹æ®å®žé™…æµ‹é‡ç»“æžœè°ƒæ•´
   - ä¸åŒæ‰¹æ¬¡çš„å™¨ä»¶å¯èƒ½æœ‰å·®å¼‚

## ðŸ“ ç»´æŠ¤å»ºè®®

1. **æ·»åŠ æ–°é…ç½®æ—¶**ï¼š
   - åœ¨ `config.h` ä¸­æ·»åŠ å®å®šä¹‰æˆ–å¤–éƒ¨å˜é‡å£°æ˜Ž
   - åœ¨ `config.c` ä¸­å®šä¹‰å˜é‡åˆå§‹å€¼
   - åœ¨æœ¬æ–‡æ¡£ä¸­æ›´æ–°è¯´æ˜Ž

2. **ç‰ˆæœ¬æŽ§åˆ¶**ï¼š
   - ä¸åŒç¡¬ä»¶ç‰ˆæœ¬å¯èƒ½éœ€è¦ä¸åŒçš„é…ç½®
   - å»ºè®®åœ¨ `Config_Init()` å‡½æ•°ä¸­æ ¹æ®ç¡¬ä»¶ç‰ˆæœ¬åŠ¨æ€è°ƒæ•´

3. **æ–‡æ¡£åŒæ­¥**ï¼š
   - ä¿®æ”¹é…ç½®å‚æ•°æ—¶åŒæ­¥æ›´æ–°æœ¬æ–‡æ¡£
   - è®°å½•ä¿®æ”¹åŽŸå› å’Œæ—¥æœŸ

## ðŸ”„ è¿ç§»è¯´æ˜Ž

ä»Žæ—§ç‰ˆæœ¬è¿ç§»æ—¶ï¼Œéœ€è¦ï¼š

1. åˆ é™¤å„ä¸ªæ–‡ä»¶ä¸­é‡å¤çš„å…¨å±€å˜é‡å®šä¹‰
2. å°†æ‰€æœ‰é­”æ•°ï¼ˆç¡¬ç¼–ç çš„æ•°å€¼ï¼‰æ›¿æ¢ä¸ºé…ç½®å®
3. åœ¨éœ€è¦ä½¿ç”¨é…ç½®çš„æ–‡ä»¶ä¸­ `#include "config.h"`
4. åœ¨ `main()` å‡½æ•°ä¸­è°ƒç”¨ `Config_Init()`

## ðŸ“… æ›´æ–°åŽ†å²

| æ—¥æœŸ | ç‰ˆæœ¬ | ä¿®æ”¹å†…å®¹ | ä¿®æ”¹äºº |
|------|------|----------|--------|
| 2025-10-27 | 1.0.0 | åˆ›å»ºé…ç½®æ–‡ä»¶ç³»ç»Ÿ | - |

